<mujoco model="dexh13_right_fixed">
  <compiler angle="radian" autolimits="true"/>

  <option cone="elliptic" impratio="10" timestep="0.001" iterations="50" integrator="RK4" solver="Newton" gravity="0 0 -9.81"/>

  <default>
    <default class="dexh13_hand">
      <joint damping="0.1" armature="0.0002" frictionloss="0.01"/>
      <geom solimp="0.5 0.99 0.0001" solref="0.005 1" friction="1.0 0.005 0.0001" condim="3"/>

      <default class="base_joint">
        <joint damping="0.2" armature="0.0003" frictionloss="0.08" stiffness="0.15" springref="0"/>
      </default>

      <default class="proximal_joint">
        <joint damping="0.3" frictionloss="0.12" stiffness="0.8" springref="0"/>
      </default>

      <default class="distal_joint">
        <joint damping="0.15" frictionloss="0.05" stiffness="0.08" springref="0"/>
      </default>

      <default class="thumb_joint">
        <joint damping="0.2" armature="0.0003" frictionloss="0.08" stiffness="0.15" springref="0"/>
      </default>
    </default>
  </default>

  <asset>
    <mesh name="right_palm_link" file="right_palm_link.STL"/>
    <mesh name="right_index_link_0" file="right_index_link_0.STL"/>
    <mesh name="right_index_link_1" file="right_index_link_1.STL"/>
    <mesh name="right_index_link_2" file="right_index_link_2.STL"/>
    <mesh name="right_index_link_3" file="right_index_link_3.STL"/>
    <mesh name="right_index_tactile_link_2" file="right_index_tactile_link_2.STL"/>
    <mesh name="right_index_tactile_link_1" file="right_index_tactile_link_1.STL"/>
    <mesh name="right_index_tactile_link_0" file="right_index_tactile_link_0.STL"/>
    <mesh name="right_middle_link_0" file="right_middle_link_0.STL"/>
    <mesh name="right_middle_link_1" file="right_middle_link_1.STL"/>
    <mesh name="right_middle_link_2" file="right_middle_link_2.STL"/>
    <mesh name="right_middle_link_3" file="right_middle_link_3.STL"/>
    <mesh name="right_middle_tactile_link_2" file="right_middle_tactile_link_2.STL"/>
    <mesh name="right_middle_tactile_link_1" file="right_middle_tactile_link_1.STL"/>
    <mesh name="right_middle_tactile_link_0" file="right_middle_tactile_link_0.STL"/>
    <mesh name="right_ring_link_0" file="right_ring_link_0.STL"/>
    <mesh name="right_ring_link_1" file="right_ring_link_1.STL"/>
    <mesh name="right_ring_link_2" file="right_ring_link_2.STL"/>
    <mesh name="right_ring_link_3" file="right_ring_link_3.STL"/>
    <mesh name="right_ring_tactile_link_2" file="right_ring_tactile_link_2.STL"/>
    <mesh name="right_ring_tactile_link_1" file="right_ring_tactile_link_1.STL"/>
    <mesh name="right_ring_tactile_link_0" file="right_ring_tactile_link_0.STL"/>
    <mesh name="right_thumb_link_0" file="right_thumb_link_0.STL"/>
    <mesh name="right_thumb_link_1" file="right_thumb_link_1.STL"/>
    <mesh name="right_thumb_link_2" file="right_thumb_link_2.STL"/>
    <mesh name="right_thumb_link_3" file="right_thumb_link_3.STL"/>
    <mesh name="right_thumb_tactile_link_1" file="right_thumb_tactile_link_1.STL"/>
    <mesh name="right_thumb_tactile_link_0" file="right_thumb_tactile_link_0.STL"/>
  </asset>

  <worldbody>
    <!-- Fixed robotic hand (mocap body) -->
    <body name="right_palm" pos="0 0 0.35" mocap="true">
      <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_palm_link"/>
    <body name="right_index_link_0" pos="0.13528 -0.0315 0.0017501" quat="1.34924e-11 -3.67321e-06 1 -3.67321e-06">
      <inertial pos="-0.000308198 8.39026e-10 -8.96269e-07" quat="0.5 0.5 -0.5 0.5" mass="0.000177082" diaginertia="3.89709e-09 3.47637e-09 6.7235e-10"/>
      <joint name="right_index_joint_0" class="base_joint" pos="0 0 0" axis="0 0 1" range="-0.35 0.35"/>
      <geom type="mesh" rgba="1 1 1 1" mesh="right_index_link_0"/>
      <body name="right_index_link_1" quat="-2.59734e-06 2.59735e-06 -0.707108 0.707105">
        <inertial pos="0.0149429 -0.00423109 0.00158808" quat="0.0519631 0.707401 -0.303584 0.636176" mass="0.00984211" diaginertia="3.56594e-06 3.05522e-06 1.4641e-06"/>
        <joint name="right_index_joint_1" class="proximal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
        <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_index_link_1"/>
        <geom pos="0.00726311 0.0025 0" quat="0.5 -0.5 -0.5 -0.5" type="mesh" rgba="1 1 1 1" mesh="right_index_tactile_link_0"/>
        <body name="right_index_link_2" pos="0.039999 1.0069e-05 0">
          <inertial pos="0.010355 -0.00338758 0.000951174" quat="0.00163408 0.643614 -0.446327 0.621732" mass="0.00591009" diaginertia="1.08135e-06 1.0057e-06 5.52058e-07"/>
          <joint name="right_index_joint_2" class="distal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
          <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_index_link_2"/>
          <geom pos="0.0041708 0.0024988 0" quat="-0.499929 0.500073 0.499927 0.500071" type="mesh" rgba="1 1 1 1" mesh="right_index_tactile_link_1"/>
          <body name="right_index_link_3" pos="0.030001 -1.0072e-05 0">
            <inertial pos="0.0066123 0.00116821 0.00371002" quat="0.398953 0.555623 -0.568193 0.457468" mass="0.00783661" diaginertia="1.75006e-06 1.49091e-06 6.24127e-07"/>
            <joint name="right_index_joint_3" class="distal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
            <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_index_link_3"/>
            <geom pos="0.0029533 -0.0067786 0" quat="-0.449339 0.545982 0.449337 0.54598" type="mesh" rgba="1 1 1 1" mesh="right_index_tactile_link_2"/>
          </body>
        </body>
      </body>
    </body>
    <body name="right_middle_link_0" pos="0.13528 0 0.0017501" quat="1.34924e-11 -3.67321e-06 1 -3.67321e-06">
      <inertial pos="-0.000308198 8.39026e-10 -8.96269e-07" quat="0.5 0.5 -0.5 0.5" mass="0.000177082" diaginertia="3.89709e-09 3.47637e-09 6.7235e-10"/>
      <joint name="right_middle_joint_0" class="base_joint" pos="0 0 0" axis="0 0 1" range="-0.35 0.35"/>
      <geom type="mesh" rgba="1 1 1 1" mesh="right_middle_link_0"/>
      <body name="right_middle_link_1" quat="-2.59734e-06 2.59735e-06 -0.707108 0.707105">
        <inertial pos="0.0149429 -0.00423109 0.00158808" quat="0.051963 0.707401 -0.303584 0.636176" mass="0.00984211" diaginertia="3.56594e-06 3.05522e-06 1.4641e-06"/>
        <joint name="right_middle_joint_1" class="proximal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
        <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_middle_link_1"/>
        <geom pos="0.00726311 0.0025 0" quat="0.5 -0.5 -0.5 -0.5" type="mesh" rgba="1 1 1 1" mesh="right_middle_tactile_link_0"/>
        <body name="right_middle_link_2" pos="0.039999 1.0076e-05 0">
          <inertial pos="0.010355 -0.00338756 0.000951174" quat="0.00163378 0.643615 -0.446326 0.621732" mass="0.00591009" diaginertia="1.08135e-06 1.0057e-06 5.52058e-07"/>
          <joint name="right_middle_joint_2" class="distal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
          <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_middle_link_2"/>
          <geom pos="0.0041708 0.0024988 0" quat="-0.499854 0.500148 0.499852 0.500146" type="mesh" rgba="1 1 1 1" mesh="right_middle_tactile_link_1"/>
          <body name="right_middle_link_3" pos="0.03 0 0">
            <inertial pos="0.00661338 0.00116797 0.00371055" quat="0.398949 0.555623 -0.568203 0.457458" mass="0.00783661" diaginertia="1.75024e-06 1.49109e-06 6.24129e-07"/>
            <joint name="right_middle_joint_3" class="distal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
            <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_middle_link_3"/>
            <geom pos="0.00295439 -0.00677974 0" quat="-0.449422 0.545912 0.449422 0.545912" type="mesh" rgba="1 1 1 1" mesh="right_middle_tactile_link_2"/>
          </body>
        </body>
      </body>
    </body>
    <body name="right_ring_link_0" pos="0.13528 0.0315 0.0017501" quat="1.34924e-11 -3.67321e-06 1 -3.67321e-06">
      <inertial pos="-0.000308198 8.39026e-10 -8.96269e-07" quat="0.5 0.5 -0.5 0.5" mass="0.000177082" diaginertia="3.89709e-09 3.47637e-09 6.7235e-10"/>
      <joint name="right_ring_joint_0" class="base_joint" pos="0 0 0" axis="0 0 1" range="-0.35 0.35"/>
      <geom type="mesh" rgba="1 1 1 1" mesh="right_ring_link_0"/>
      <body name="right_ring_link_1" quat="-2.59734e-06 2.59735e-06 -0.707108 0.707105">
        <inertial pos="0.0149429 -0.00423109 0.00158808" quat="0.051963 0.707401 -0.303584 0.636176" mass="0.00984211" diaginertia="3.56594e-06 3.05522e-06 1.4641e-06"/>
        <joint name="right_ring_joint_1" class="proximal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
        <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_ring_link_1"/>
        <geom pos="0.00726311 0.0025 0" quat="0.5 -0.5 -0.5 -0.5" type="mesh" rgba="1 1 1 1" mesh="right_ring_tactile_link_0"/>
        <body name="right_ring_link_2" pos="0.039998 1.0704e-05 0">
          <inertial pos="0.0103558 -0.00338611 0.00095107" quat="0.00158937 0.643653 -0.446268 0.621734" mass="0.00591009" diaginertia="1.08129e-06 1.00564e-06 5.52061e-07"/>
          <joint name="right_ring_joint_2" class="distal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
          <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_ring_link_2"/>
          <geom pos="0.00417038 0.0024994 0" quat="-0.499964 0.500036 0.499964 0.500036" type="mesh" rgba="1 1 1 1" mesh="right_ring_tactile_link_1"/>
          <body name="right_ring_link_3" pos="0.03 0 0">
            <inertial pos="0.00661657 0.00116623 0.00371105" quat="0.399023 0.555567 -0.568252 0.457401" mass="0.00783661" diaginertia="1.75081e-06 1.49163e-06 6.24154e-07"/>
            <joint name="right_ring_joint_3" class="distal_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
            <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_ring_link_3"/>
            <geom pos="0.00295557 -0.00678474 0" quat="-0.449426 0.545909 0.449426 0.545909" type="mesh" rgba="1 1 1 1" mesh="right_ring_tactile_link_2"/>
          </body>
        </body>
      </body>
    </body>
    <body name="right_thumb_link_0" pos="0.039278 -0.0365 0.0017501" quat="1.34924e-11 -3.67321e-06 1 -3.67321e-06">
      <inertial pos="-4.08049e-06 -0.000308171 -8.96269e-07" quat="0.00468012 0.707091 -0.00468012 0.707091" mass="0.000177082" diaginertia="3.89709e-09 3.47637e-09 6.7235e-10"/>
      <joint name="right_thumb_joint_0" class="thumb_joint" pos="0 0 0" axis="0 0 1" range="-0.35 0.35"/>
      <geom type="mesh" rgba="1 1 1 1" mesh="right_thumb_link_0"/>
      <body name="right_thumb_link_1" quat="0.496687 -0.496689 0.503291 -0.503289">
        <inertial pos="0.0207891 0.000590091 -0.00764771" quat="0.259227 0.585446 0.641818 0.422047" mass="0.00460891" diaginertia="1.56581e-06 1.46138e-06 2.48517e-07"/>
        <joint name="right_thumb_joint_1" class="thumb_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
        <geom type="mesh" rgba="1 1 1 1" mesh="right_thumb_link_1"/>
        <body name="right_thumb_link_2" pos="0.038999 0.015063 -0.0215" quat="0.70709 -0.707093 -0.00467994 -0.00467996">
          <inertial pos="0.0270024 -0.00497999 -0.00347891" quat="0.152483 0.697278 -0.324973 0.62044" mass="0.0192085" diaginertia="1.94303e-05 1.6822e-05 6.26229e-06"/>
          <joint name="right_thumb_joint_2" class="thumb_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
          <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_thumb_link_2"/>
          <geom pos="0.0063893 0.004585 -0.0060631" quat="-0.503218 0.496763 0.503216 0.496761" type="mesh" rgba="1 1 1 1" mesh="right_thumb_tactile_link_0"/>
          <body name="right_thumb_link_3" pos="0.065494 0.00086701 0">
            <inertial pos="0.0100426 0.000797528 0.000250548" quat="0.31224 0.589358 -0.578338 0.469775" mass="0.014342" diaginertia="6.38372e-06 5.95435e-06 1.46716e-06"/>
            <joint name="right_thumb_joint_3" class="thumb_joint" pos="0 0 0" axis="0 0 1" range="0 1.57"/>
            <geom type="mesh" rgba="0.752941 0.752941 0.752941 1" mesh="right_thumb_link_3"/>
            <geom pos="0.0044234 -0.0069828 -0.0060631" quat="-0.455642 0.540733 0.45564 0.540731" type="mesh" rgba="1 1 1 1" mesh="right_thumb_tactile_link_1"/>
          </body>
        </body>
      </body>
    </body>
    </body>
  </worldbody>

  <!-- Disable only Proximal Joint (Link 1) collisions between adjacent fingers -->
  <!-- This prevents interference when returning to 0 position -->
  <!-- Keeps distal joint (Link 2, 3) collisions for object grasping -->
  <contact>
    <exclude body1="right_index_link_1" body2="right_palm"/>
    <exclude body1="right_middle_link_1" body2="right_palm"/>
    <exclude body1="right_ring_link_1" body2="right_palm"/>
    <exclude body1="right_thumb_link_1" body2="right_palm"/>
    <exclude body1="right_index_link_0" body2="right_palm"/>
    <exclude body1="right_middle_link_0" body2="right_palm"/>
    <exclude body1="right_ring_link_0" body2="right_palm"/>
    <exclude body1="right_thumb_link_0" body2="right_palm"/>
  </contact>

  <tendon>
    <fixed name="right_index_J0">
      <joint joint="right_index_joint_2" coef="1"/>
      <joint joint="right_index_joint_3" coef="1"/>
    </fixed>
    <fixed name="right_middle_J0">
      <joint joint="right_middle_joint_2" coef="1"/>
      <joint joint="right_middle_joint_3" coef="1"/>
    </fixed>
    <fixed name="right_ring_J0">
      <joint joint="right_ring_joint_2" coef="1"/>
      <joint joint="right_ring_joint_3" coef="1"/>
    </fixed>
  </tendon>

  <actuator>
    <!-- Index finger actuators - Motor control (direct torque) -->
    <motor name="M_right_index_joint_0" joint="right_index_joint_0" ctrlrange="-1.0 1.0" gear="1"/>
    <motor name="M_right_index_joint_1" joint="right_index_joint_1" ctrlrange="-2.5 2.5" gear="1"/>
    <motor name="M_right_index_J0" tendon="right_index_J0" ctrlrange="-0.6 0.6" gear="1"/>

    <!-- Middle finger actuators -->
    <motor name="M_right_middle_joint_0" joint="right_middle_joint_0" ctrlrange="-1.0 1.0" gear="1"/>
    <motor name="M_right_middle_joint_1" joint="right_middle_joint_1" ctrlrange="-2.5 2.5" gear="1"/>
    <motor name="M_right_middle_J0" tendon="right_middle_J0" ctrlrange="-0.6 0.6" gear="1"/>

    <!-- Ring finger actuators -->
    <motor name="M_right_ring_joint_0" joint="right_ring_joint_0" ctrlrange="-1.0 1.0" gear="1"/>
    <motor name="M_right_ring_joint_1" joint="right_ring_joint_1" ctrlrange="-2.5 2.5" gear="1"/>
    <motor name="M_right_ring_J0" tendon="right_ring_J0" ctrlrange="-0.6 0.6" gear="1"/>

    <!-- Thumb actuators -->
    <motor name="M_right_thumb_joint_0" joint="right_thumb_joint_0" ctrlrange="-1.0 1.0" gear="1"/>
    <motor name="M_right_thumb_joint_1" joint="right_thumb_joint_1" ctrlrange="-0.8 0.8" gear="1"/>
    <motor name="M_right_thumb_joint_2" joint="right_thumb_joint_2" ctrlrange="-0.8 0.8" gear="1"/>
    <motor name="M_right_thumb_joint_3" joint="right_thumb_joint_3" ctrlrange="-0.6 0.6" gear="1"/>
  </actuator>
</mujoco>
